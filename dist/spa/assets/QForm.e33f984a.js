import{g as k,M as G,a as z,b as B,c as X}from"./base.view-model.5e1efaea.js";import{aJ as S,aK as O,aL as J,b as Y,r as P,s as Z,aM as H,c as j,l as ee,ae as te,a5 as ae,aD as re,o as ne,h as ue,K as le,g as ie,a6 as oe,V as T,X as se,aN as fe}from"./index.3c48b6f7.js";import{b as ce}from"./focus-manager.02955f48.js";var de=function(){function e(a,s,u){u===void 0&&(u=!1),this.target=a,this.name=s,this.async=u}return Object.defineProperty(e.prototype,"instance",{get:function(){return k(this.target)},enumerable:!1,configurable:!0}),e}();function ve(e){var a;if(e.validator instanceof Function){a=e.validator;var s=k(G).getTargetValidatorConstraints(e.validator);if(s.length>1)throw"More than one implementation of ValidatorConstraintInterface found for validator on: ".concat(e.target.name,":").concat(e.propertyName)}else{var u=e.validator;a=function(){function n(){}return n.prototype.validate=function(i,t){return u.validate(i,t)},n.prototype.defaultMessage=function(i){return u.defaultMessage?u.defaultMessage(i):""},n}(),z().addConstraintMetadata(new de(a,e.name,e.async))}var c={type:e.name&&B.isValid(e.name)?e.name:B.CUSTOM_VALIDATION,name:e.name,target:e.target,propertyName:e.propertyName,validationOptions:e.options,constraintCls:a,constraints:e.constraints};z().addValidationMetadata(new X(c))}function Q(e,a){return function(s){var u=a&&a.each?"each value in ":"";return e(u,s)}}function W(e,a){return function(s,u){ve({name:e.name,target:s.constructor,propertyName:u,options:a,constraints:e.constraints,validator:e.validator})}}var me="isNotEmpty";function ge(e){return e!==""&&e!==null&&e!==void 0}function be(e){return W({name:me,validator:{validate:function(a,s){return ge(a)},defaultMessage:Q(function(a){return a+"$property should not be empty"},e)}},e)}var A={exports:{}};(function(e,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=n;var s=u(S.exports);function u(i){return i&&i.__esModule?i:{default:i}}function c(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?c=function(l){return typeof l}:c=function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},c(i)}function n(i,t){(0,s.default)(i);var l,d;c(t)==="object"?(l=t.min||0,d=t.max):(l=arguments[1],d=arguments[2]);var f=encodeURI(i).split(/%..|./).length-1;return f>=l&&(typeof d>"u"||f<=d)}e.exports=a.default,e.exports.default=a.default})(A,A.exports);var I={exports:{}},q={exports:{}};(function(e,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=i;var s=c(S.exports),u=c(O.exports);function c(t){return t&&t.__esModule?t:{default:t}}var n={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};function i(t,l){(0,s.default)(t),l=(0,u.default)(l,n),l.allow_trailing_dot&&t[t.length-1]==="."&&(t=t.substring(0,t.length-1)),l.allow_wildcard===!0&&t.indexOf("*.")===0&&(t=t.substring(2));var d=t.split("."),f=d[d.length-1];return l.require_tld&&(d.length<2||!l.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(f)||/\s/.test(f))||!l.allow_numeric_tld&&/^\d+$/.test(f)?!1:d.every(function(v){return!(v.length>63&&!l.ignore_max_length||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(v)||/[\uff01-\uff5e]/.test(v)||/^-|-$/.test(v)||!l.allow_underscores&&/_/.test(v))})}e.exports=a.default,e.exports.default=a.default})(q,q.exports);var $={exports:{}};(function(e,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=d;var s=u(S.exports);function u(f){return f&&f.__esModule?f:{default:f}}var c="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",n="(".concat(c,"[.]){3}").concat(c),i=new RegExp("^".concat(n,"$")),t="(?:[0-9a-fA-F]{1,4})",l=new RegExp("^("+"(?:".concat(t,":){7}(?:").concat(t,"|:)|")+"(?:".concat(t,":){6}(?:").concat(n,"|:").concat(t,"|:)|")+"(?:".concat(t,":){5}(?::").concat(n,"|(:").concat(t,"){1,2}|:)|")+"(?:".concat(t,":){4}(?:(:").concat(t,"){0,1}:").concat(n,"|(:").concat(t,"){1,3}|:)|")+"(?:".concat(t,":){3}(?:(:").concat(t,"){0,2}:").concat(n,"|(:").concat(t,"){1,4}|:)|")+"(?:".concat(t,":){2}(?:(:").concat(t,"){0,3}:").concat(n,"|(:").concat(t,"){1,5}|:)|")+"(?:".concat(t,":){1}(?:(:").concat(t,"){0,4}:").concat(n,"|(:").concat(t,"){1,6}|:)|")+"(?::((?::".concat(t,"){0,5}:").concat(n,"|(?::").concat(t,"){1,7}|:))")+")(%[0-9a-zA-Z-.:]{1,})?$");function d(f){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(0,s.default)(f),v=String(v),v?v==="4"?i.test(f):v==="6"?l.test(f):!1:d(f,4)||d(f,6)}e.exports=a.default,e.exports.default=a.default})($,$.exports);(function(e,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=E;var s=t(S.exports),u=t(A.exports),c=t(q.exports),n=t($.exports),i=t(O.exports);function t(_){return _&&_.__esModule?_:{default:_}}var l={allow_display_name:!1,allow_underscores:!1,require_display_name:!1,allow_utf8_local_part:!0,require_tld:!0,blacklisted_chars:"",ignore_max_length:!1,host_blacklist:[],host_whitelist:[]},d=/^([^\x00-\x1F\x7F-\x9F\cX]+)</i,f=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,v=/^[a-z\d]+$/,F=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,o=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A1-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,x=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i,p=254;function b(_){var r=_.replace(/^"(.+)"$/,"$1");if(!r.trim())return!1;var g=/[\.";<>]/.test(r);if(g){if(r===_)return!1;var m=r.split('"').length===r.split('\\"').length;if(!m)return!1}return!0}function E(_,r){if((0,s.default)(_),r=(0,i.default)(r,l),r.require_display_name||r.allow_display_name){var g=_.match(d);if(g){var m=g[1];if(_=_.replace(m,"").replace(/(^<|>$)/g,""),m.endsWith(" ")&&(m=m.slice(0,-1)),!b(m))return!1}else if(r.require_display_name)return!1}if(!r.ignore_max_length&&_.length>p)return!1;var w=_.split("@"),y=w.pop(),M=y.toLowerCase();if(r.host_blacklist.includes(M)||r.host_whitelist.length>0&&!r.host_whitelist.includes(M))return!1;var h=w.join("@");if(r.domain_specific_validation&&(M==="gmail.com"||M==="googlemail.com")){h=h.toLowerCase();var V=h.split("+")[0];if(!(0,u.default)(V.replace(/\./g,""),{min:6,max:30}))return!1;for(var R=V.split("."),C=0;C<R.length;C++)if(!v.test(R[C]))return!1}if(r.ignore_max_length===!1&&(!(0,u.default)(h,{max:64})||!(0,u.default)(y,{max:254})))return!1;if(!(0,c.default)(y,{require_tld:r.require_tld,ignore_max_length:r.ignore_max_length,allow_underscores:r.allow_underscores})){if(!r.allow_ip_domain)return!1;if(!(0,n.default)(y)){if(!y.startsWith("[")||!y.endsWith("]"))return!1;var L=y.slice(1,-1);if(L.length===0||!(0,n.default)(L))return!1}}if(h[0]==='"')return h=h.slice(1,h.length-1),r.allow_utf8_local_part?x.test(h):F.test(h);for(var K=r.allow_utf8_local_part?o:f,U=h.split("."),D=0;D<U.length;D++)if(!K.test(U[D]))return!1;return!(r.blacklisted_chars&&h.search(new RegExp("[".concat(r.blacklisted_chars,"]+"),"g"))!==-1)}e.exports=a.default,e.exports.default=a.default})(I,I.exports);var _e=J(I.exports),xe="isEmail";function he(e,a){return typeof e=="string"&&_e(e,a)}function Ee(e,a){return W({name:xe,constraints:[e],validator:{validate:function(s,u){return he(s,u==null?void 0:u.constraints[0])},defaultMessage:Q(function(s){return s+"$property must be an email"},a)}},a)}const N=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const ye=()=>{};function Me(e,a,s){let u;Y(s)?u={evaluating:s}:u=s||{};const{lazy:c=!1,evaluating:n=void 0,shallow:i=!0,onError:t=ye}=u,l=P(!c),d=i?Z(a):P(a);let f=0;return H(async v=>{if(!l.value)return;f++;const F=f;let o=!1;n&&Promise.resolve().then(()=>{n.value=!0});try{const x=await e(p=>{v(()=>{n&&(n.value=!1),o||p()})});F===f&&(d.value=x)}catch(x){t(x)}finally{n&&F===f&&(n.value=!1),o=!0}}),c?j(()=>(l.value=!0,d.value)):d}N&&window.document;N&&window.navigator;N&&window.location;var Se=ee({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(e,{slots:a,emit:s}){const u=ie(),c=P(null);let n=0;const i=[];function t(o){const x=typeof o=="boolean"?o:e.noErrorFocus!==!0,p=++n,b=(r,g)=>{s("validation"+(r===!0?"Success":"Error"),g)},E=r=>{const g=r.validate();return typeof g.then=="function"?g.then(m=>({valid:m,comp:r}),m=>({valid:!1,comp:r,err:m})):Promise.resolve({valid:g,comp:r})};return(e.greedy===!0?Promise.all(i.map(E)).then(r=>r.filter(g=>g.valid!==!0)):i.reduce((r,g)=>r.then(()=>E(g).then(m=>{if(m.valid===!1)return Promise.reject(m)})),Promise.resolve()).catch(r=>[r])).then(r=>{if(r===void 0||r.length===0)return p===n&&b(!0),!0;if(p===n){const{comp:g,err:m}=r[0];if(m!==void 0&&console.error(m),b(!1,g),x===!0){const w=r.find(({comp:y})=>typeof y.focus=="function"&&oe(y.$)===!1);w!==void 0&&w.comp.focus()}}return!1})}function l(){n++,i.forEach(o=>{typeof o.resetValidation=="function"&&o.resetValidation()})}function d(o){o!==void 0&&T(o);const x=n+1;t().then(p=>{x===n&&p===!0&&(e.onSubmit!==void 0?s("submit",o):o!==void 0&&o.target!==void 0&&typeof o.target.submit=="function"&&o.target.submit())})}function f(o){o!==void 0&&T(o),s("reset"),se(()=>{l(),e.autofocus===!0&&e.noResetFocus!==!0&&v()})}function v(){ce(()=>{if(c.value===null)return;const o=c.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||c.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||c.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(c.value.querySelectorAll("[tabindex]"),x=>x.tabIndex>-1);o!=null&&o.focus({preventScroll:!0})})}te(fe,{bindComponent(o){i.push(o)},unbindComponent(o){const x=i.indexOf(o);x>-1&&i.splice(x,1)}});let F=!1;return ae(()=>{F=!0}),re(()=>{F===!0&&e.autofocus===!0&&v()}),ne(()=>{e.autofocus===!0&&v()}),Object.assign(u.proxy,{validate:t,resetValidation:l,submit:d,reset:f,focus:v,getValidationComponents:()=>i}),()=>ue("form",{class:"q-form",ref:c,onSubmit:d,onReset:f},le(a.default))}});export{be as I,Se as Q,W as V,Ee as a,Q as b,Me as c};
