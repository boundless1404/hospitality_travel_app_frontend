import{Q as A}from"./use-dark.f400b985.js";import{Q as E,a as F,b as Y,c as G}from"./QHeader.d5132a5c.js";import{d as J,ai as K,q as W,am as X,r as u,c as Z,aM as ee,o as I,t as oe,n as R,v as U,x as o,f as e,y as D,ay as N,A as n,Q as b,C as te,ao as se,D as m,aU as p,B as ae,aR as T}from"./index.3c48b6f7.js";import{Q as ie,a as f}from"./QItemLabel.9ddb68b1.js";import{Q as ne,a as re}from"./use-model-toggle.e512d394.js";import{Q as le}from"./QMenu.f664353c.js";import{Q as ue,a as ce}from"./QLayout.60eaca2e.js";import{B as de,a as me}from"./bookings.view-model.3c432e2e.js";import"./selection.87736456.js";import"./focus-manager.02955f48.js";import"./base.view-model.5e1efaea.js";import"./axios.4c6579cc.js";const ge={class:"flex row justify-around",style:{width:"80%"}},pe={class:"q-mr-lg"},fe={class:"bg-white",style:{position:"relative",bottom:"0",width:"100%",height:"8rem","margin-top":"2rem","z-index":"0 !important"}},ve={style:{position:"relative"}},_e=n("div",{class:"text-white text-center",style:{position:"absolute",bottom:"0","z-index":"9999",width:"100%"}},[n("span",null,"\xA92024"),m(" | "),n("span",null,"Starlings Properties"),n("span",null," | "),n("span",null,"Powered by: boundlessedge")],-1),$e=J({__name:"AuthLayout",setup(he){var x,S,V,z,M;const i=new de(K(new me)),v=W(),k=X(),_=u(),g=u(!1),h=u((x=i.stores.currentVals)==null?void 0:x.booking),y=u((S=i.stores.bookings)==null?void 0:S.suiteBooking),w=u((V=i.stores.bookings)==null?void 0:V.autoBooking),B=u((z=i.stores.bookings)==null?void 0:z.visaBooking),Q=u((M=i.stores.bookings)==null?void 0:M.tourBooking),C=Z(()=>{var $,L,P,q;let s=0;const r=(($=y.value)==null?void 0:$.reduce((a,l)=>(a+=l.price,a),0))||0,c=((L=w.value)==null?void 0:L.reduce((a,l)=>(a+=l.price,a),0))||0,t=((P=B.value)==null?void 0:P.reduce((a,l)=>(a+=l.price,a),0))||0,d=((q=Q.value)==null?void 0:q.reduce((a,l)=>(a+=l.price,a),0))||0;return s=r+c+t+d,s});ee(()=>{h.value=C.value});function j(){var s;(s=i.stores.auth)==null||s.$reset(),v.push("/signin")}function H(){g.value=!g.value}function O(){if(C.value<=0){k.notify({message:"You have no booking in your cart",color:"negative",position:"top",icon:"report_problem"});return}v.push("/payment")}return I(async()=>{var s;await((s=i.stores.bookings)==null?void 0:s.initializeStore())}),I(async()=>{var s,r,c;await((s=i.stores.auth)==null?void 0:s.initializeStore()),_.value=(r=i.stores.auth)==null?void 0:r.userData,(c=i.stores.bookings)==null||c.$subscribe((t,d)=>{y.value=d.suiteBooking,w.value=d.autoBooking,B.value=d.visaBooking,Q.value=d.tourBooking})}),(s,r)=>{const c=oe("router-view");return R(),U(ue,{view:"hHh lpR fFf"},{default:o(()=>[e(G,{class:"bg-white text-white",bordered:"",style:{"border-bottom-style":"solid","border-bottom-width":"0.2rem"}},{default:o(()=>[e(E,null,{default:o(()=>[D((R(),U(F,{class:"q-mt-sm cursor-pointer"},{default:o(()=>[e(A,{height:"8rem",onClick:r[0]||(r[0]=t=>N(v).push("/")),width:"10rem",fit:"cover",src:"/assets/starlings_logo.png"})]),_:1})),[[T]]),n("div",ge,[e(b,{color:"primary",to:"/bookings",label:"Bookings",size:N(k).screen.lt.lg?"0.5rem":"",rounded:"",outline:"","no-caps":""},null,8,["size"])]),n("div",pe,[e(b,{class:"flex row justify-between",style:te({border:`${s.$getColor("primary")} solid 0.1px`}),color:"white",flat:"",outline:"",size:"1.4rem",rounded:"",ripple:!1,onClick:O},{default:o(()=>[e(ie,{class:se(h.value>0?"bg-green text-white":"")},{default:o(()=>{var t;return[m("Cart ("+p("\u20A6")+p((t=h.value)==null?void 0:t.toLocaleString("en-US"))+")",1)]}),_:1},8,["class"]),D(e(ae,{color:"dark",name:"account_circle",onMouseover:H},null,512),[[T,void 0,void 0,{center:!0}]]),e(le,{modelValue:g.value,"onUpdate:modelValue":r[1]||(r[1]=t=>g.value=t),anchor:"bottom right",self:"top right"},{default:o(()=>[e(Y,null,{default:o(()=>[e(ne,null,{default:o(()=>[e(re,null,{default:o(()=>[e(f,null,{default:o(()=>[m("Signed in as")]),_:1}),e(f,null,{default:o(()=>{var t;return[m(p((t=_.value)==null?void 0:t.firstName),1)]}),_:1}),e(f,{caption:""},{default:o(()=>{var t;return[m(p((t=_.value)==null?void 0:t.email),1)]}),_:1}),e(f,null,{default:o(()=>[e(b,{label:"Sign Out",onClick:j,flat:"",dense:"","no-caps":""})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["style"])])]),_:1})]),_:1}),e(ce,{class:"alegreya q-pa-sm"},{default:o(()=>[e(c),n("div",fe,[n("div",null,[n("div",ve,[e(A,{src:"assets/Rectangle 110.png"}),_e])])])]),_:1})]),_:1})}}});export{$e as default};
