import{d as ie,ai as D,am as re,q as ae,r as d,c as y,w as V,o as ne,n as m,v as M,x as Q,A as o,aU as p,ay as _,C as q,f as r,Q as w,p as x,an as $,F as N,D as A,y as ce,z as de,B as ue}from"./index.3c48b6f7.js";import{Q as E}from"./QSelect.7c826cfb.js";import{Q as z}from"./use-dark.f400b985.js";import{Q as me}from"./QTooltip.9c7d8d44.js";import{Q as pe}from"./QItemLabel.9ddb68b1.js";import{Q as ve}from"./QPage.2dc96178.js";import{a as ge,t as he}from"./utils.6837a8f1.js";import{B as ye,V as fe}from"./base.view-model.5e1efaea.js";import{S as _e,a as we}from"./suites.view-model.5e202107.js";import{S as xe}from"./urlPaths.enum.82ba9a55.js";import{B as be}from"./BookingsComponent.4bbc2af4.js";import"./use-key-composition.d4c28df8.js";import"./focus-manager.02955f48.js";import"./use-model-toggle.e512d394.js";import"./QMenu.f664353c.js";import"./selection.87736456.js";import"./use-form.63261807.js";import"./axios.4c6579cc.js";import"./QCard.bc89b753.js";import"./QExpansionItem.c04b3fa0.js";import"./bookings.view-model.3c432e2e.js";import"./QInput.04198cfd.js";import"./use-cache.b0833c75.js";import"./QForm.e33f984a.js";import"./plugin-vue_export-helper.21dcd24c.js";class Ce extends ye{serviceProviderName;serviceType;suites;category;usersReviews}class qe extends fe{async populateModelFields(k){var i,g;this.model.suites=await this.requestApi(`${xe.Get_SUITES}?${ge(k)}`),console.log("These are the suites:",this.model.suites),this.model.category=((i=this.model.suites)==null?void 0:i[0].category)||"",this.model.serviceProviderName=((g=this.model.suites)==null?void 0:g[0].provider.name)||"",this.model.serviceType=this.model.suites[0].type}}const ke={class:"q-ml-xl q-pl-sm"},Pe={class:"q-px-lg"},Se={class:"flex flex-center"},Be={class:"flex row flex-center q-py-xs"},Ie={class:"flex row flex-center rooms-type-slide",style:{height:"100%",width:"70%"}},Ve={class:"q-mt-lg q-ml-lg"},Me=o("span",{class:"q-ml-sm"},"Suite Providers:",-1),Qe={style:{width:"88vw","margin-top":"5rem","margin-bottom":"5rem"}},$e={class:"q-mt-md text-center",style:{width:"100%"}},Ne={style:{width:"100%",display:"flex","justify-content":"space-evenly","align-items":"center","margin-top":"3rem","margin-bottom":"3rem"}},ze={style:{width:"80%"}},Fe={class:"row q-col-gutter-md"},Oe={class:"col-12 col-md-6"},Re={class:"flex row justify-between no-wrap items-baseline q-gutter-x-md q-mt-md",style:{width:"100%"}},Te={class:"flex row justify-between q-gutter-x-md q-mt-md"},Ue={class:"col-12 col-md-6 flex items-center justify-center"},je={class:"text-body2"},De={class:"image-grid"},Ae={class:"q-mt-xl",style:{width:"88vw"}},Ee=o("p",{style:{width:"100%",textAlign:"center",fontSize:"1.8rem",borderTop:"solid .1rem",borderBottom:"solid .1rem"}}," Features and Amenities ",-1),Le={style:{width:"100%",display:"flex","place-content":"center","padding-left":"12vw"}},Ge={class:"row q-col-gutter-md q-mt-md"},He={class:"flex items-center"},Je=o("p",{class:"q-mt-xl",style:{"text-align":"center","font-size":"1.2rem"}},"Users Reviews",-1),Ke={key:0},We={key:1,class:"empty-reviews-state"},Xe=o("p",{class:"text-center q-mt-md",style:{"font-size":"0.8rem !important"}},"No reviews yet.",-1),Ye=o("div",null,null,-1),ko=ie({__name:"SuitebookingPage",setup(F){const k=new qe(D(new Ce)),i=k.model,g=new _e(D(new we)),a=g.model,L=re(),O=ae(),{serviceId:R}=O.currentRoute.value.params,{serviceProviderId:G}=O.currentRoute.value.params,c=d(0),P=d(0),s=d(),h=d(""),b=d(),S=d(!1),H=d("suiteBooking"),f=d(""),C=d(0),T=d(""),J=d([{name:"Bathroom",icon:"bathroom"},{name:"Bathroom",icon:"bathroom"},{name:"Bathroom",icon:"bathroom"},{name:"Bathroom",icon:"bathroom"}]),B=y(()=>{var t,n,u;return console.log("this is the price options",(t=s==null?void 0:s.value)==null?void 0:t.priceOptions),(u=(n=s==null?void 0:s.value)==null?void 0:n.priceOptions)==null?void 0:u.map(l=>({label:he(l.durationType.split("_").join(" ")),value:l.id}))}),K=y(()=>{var e,t;return console.log((e=s==null?void 0:s.value)==null?void 0:e.description),(t=s==null?void 0:s.value)==null?void 0:t.description}),U=y(()=>{var e;return((e=s==null?void 0:s.value)==null?void 0:e.category.split("_").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" "))||""}),W=y(()=>!1);y(()=>{var e,t;return((t=(e=a.providers)==null?void 0:e.find(n=>n.id===f.value))==null?void 0:t.name)||""});const X=y(()=>{var u;if(!((u=a.categories)!=null&&u.length))return[];const e=c.value-1<0?C.value:c.value-1,t=c.value+1>C.value?0:c.value+1,n=[a.categories[e],a.categories[c.value],a.categories[t]];return console.log("this is the result: ",n),n}),Y=y(()=>{var e;return((e=a.providers)==null?void 0:e.map(t=>({label:t.name,value:t.id})))||[]});function Z(){S.value=!S.value}function j(e){return Number((Math.random()*e).toFixed())}function ee(){let e=P.value;e++,e===i.suites.length&&(e=0),s.value=i.suites[e],P.value=e}function oe(){let e=P.value;e--,e<0&&(e=i.suites.length-1),s.value=i.suites[e],P.value=e}async function te(e){T.value=e,await g.getSuites({category:e.split(" ").join("_"),...f.value?{serviceProviderId:f.value}:{serviceId:R}})}function se(){let e=c.value;e+=1,e>C.value&&(e=0),c.value=e}function le(){let e=c.value;e-=1,e<0&&(e=C.value),c.value=e}return V(B,e=>{e&&(h.value=e[0].value)}),V(h,e=>{var t;if(e){const n=(t=s.value)==null?void 0:t.priceOptions.find(u=>u.id===e);b.value=n}console.log("newVal: ",e)}),V(f,async e=>{e&&(console.log("before request: ",a.suites),await g.getSuites({serviceProviderId:e}),console.log("after request: ",a.suites))}),ne(async()=>{await g.populateModelFields(R),await k.populateModelFields({serviceProviderId:G}),C.value=(a==null?void 0:a.categories.length)-1,c.value=j(i.suites.length-1),s.value=i.suites[c.value],h.value=s.value.priceOptions[0].id}),(e,t)=>(m(),M(ve,null,{default:Q(()=>{var n,u;return[o("div",null,[o("div",null,[o("h4",null,p(_(i).serviceProviderName)+" "+p(_(i).serviceType)+" - ables",1)]),o("p",ke,p(_(a).submessage),1),o("div",Pe,[o("div",Se,[o("div",{class:"border-rounded-sm q-mx-lg",style:q({width:"98%",height:"12vh",border:`solid ${e.$getColor("secondary")} 0.1rem`})},[o("div",Be,[r(w,{class:"q-pa-sm",style:q({border:`${e.$getColor("secondary")} solid 0.1px`}),icon:"arrow_left",size:"1.2vw",round:"",flat:"",outline:"",color:"secondary",onClick:le},null,8,["style"]),o("div",Ie,[(m(!0),x(N,null,$(X.value,(l,v)=>(m(),M(w,{key:v,icon:"apartment",label:(_(L).screen.lt.lg?l.slice(0,14):l).split("_").join(" "),flat:"",size:"1.4vw",outline:"",color:T.value===l?"accent":"secondary",stack:"","no-caps":"",onClick:I=>te(l)},null,8,["label","color","onClick"]))),128))]),r(w,{style:q({border:`${e.$getColor("secondary")} solid 0.1px`}),icon:"arrow_right",size:"1.2vw",round:"",flat:"",outline:"",color:"secondary",class:"q-pa-sm",onClick:se},null,8,["style"])])],4)]),o("div",Ve,[Me,r(E,{style:{width:"20%"},color:"secondary",label:"All",modelValue:f.value,"onUpdate:modelValue":t[0]||(t[0]=l=>f.value=l),options:Y.value,"emit-value":"","map-options":"",outlined:"",rounded:"",dense:""},null,8,["modelValue","options"])]),o("div",Qe,[o("p",$e,p(U.value),1),o("div",Ne,[r(w,{class:"q-pa-sm",style:q({border:`${e.$getColor("secondary")} solid 0.1px`}),icon:"arrow_left",size:"0.6vw",round:"",flat:"",outline:"",color:"secondary",onClick:oe},null,8,["style"]),o("div",ze,[o("div",Fe,[o("div",Oe,[r(z,{class:"full-width",style:{"border-radius":"2rem"},src:(n=s.value)==null?void 0:n.files[j(_(i).suites.length-1)].url},null,8,["src"]),o("div",Re,[o("div",Te,[r(pe,{class:"cursor-pointer",color:"primary","text-color":"white"},{default:Q(()=>{var l,v;return[A(p("\u20A6")+p(((l=b.value)==null?void 0:l.price)||0)+" ",1),ce(r(me,{class:"bg-secondary"},{default:Q(()=>{var I;return[A(p(((I=b.value)==null?void 0:I.description)||""),1)]}),_:1},512),[[de,(v=b.value)==null?void 0:v.description]])]}),_:1}),r(E,{modelValue:h.value,"onUpdate:modelValue":t[1]||(t[1]=l=>h.value=l),options:B.value,dense:"","options-dense":"",borderless:"",style:{width:"120px"},"map-options":"","emit-value":""},null,8,["modelValue","options"])]),o("div",null,[r(w,{color:"primary",label:"Book Now","no-caps":"",rounded:"",onClick:Z})])])]),o("div",Ue,[o("p",je,p(K.value),1)])])]),r(w,{class:"q-pa-sm",style:q({border:`${e.$getColor("secondary")} solid 0.1px`}),icon:"arrow_right",size:"0.6vw",round:"",flat:"",outline:"",color:"secondary",onClick:ee},null,8,["style"])]),o("div",De,[(m(!0),x(N,null,$((u=s.value)==null?void 0:u.files,(l,v)=>(m(),M(z,{key:v,class:"grid-image",src:l.url},null,8,["src"]))),128))])]),o("div",Ae,[Ee,o("div",Le,[o("div",Ge,[(m(!0),x(N,null,$(J.value,(l,v)=>(m(),x("div",{key:v,class:"col-6 q-mb-md"},[o("div",He,[r(ue,{name:l.icon,color:"primary",size:"2rem",class:"q-mr-sm"},null,8,["name"]),o("span",null,p(l.name),1)])]))),128))])]),o("div",null,[Je,W.value?(m(),x("div",Ke)):(m(),x("div",We,[r(z,{src:"/assets/undraw_reviews_lp8w.png",style:{width:"200px",height:"200px"}}),Xe])),Ye])])])]),r(be,{"show-modal":S.value,"onUpdate:showModal":t[2]||(t[2]=l=>S.value=!1),"suite-booking-component-props":{currentSuite:s.value,selectedPriceId:h.value,serviceProviderName:_(i).serviceProviderName,currentCategory:U.value,currentSelectedPriceOption:b.value,priceSelectOptions:B.value},"current-booking-component-name":H.value,"onUpdate:selectedPriceId":t[3]||(t[3]=l=>h.value=l)},null,8,["show-modal","suite-booking-component-props","current-booking-component-name"])]}),_:1}))}});export{ko as default};
