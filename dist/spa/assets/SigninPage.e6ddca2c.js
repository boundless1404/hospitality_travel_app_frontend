import{Q as x}from"./QInput.04198cfd.js";import{ax as z,d as D,am as E,q as F,r as v,ai as b,c as q,n as S,v as U,x as V,ao as P,A as o,f as m,Q as j,D as I,ay as G,C as O,p as H,E as J,G as K,H as L}from"./index.3c48b6f7.js";import{Q as k}from"./use-dark.f400b985.js";import{Q as W}from"./QPage.2dc96178.js";import{T as X,S as Y,a as Z,b as ee,u as se,l as te}from"./projectConstants.d6c4b657.js";import{I as B,a as ae,c as C,Q as oe}from"./QForm.e33f984a.js";import{B as ie,V as ne}from"./base.view-model.5e1efaea.js";import{A as Q}from"./urlPaths.enum.82ba9a55.js";import{c as A,i as le}from"./utils.6837a8f1.js";import{_ as re}from"./plugin-vue_export-helper.21dcd24c.js";import"./use-key-composition.d4c28df8.js";import"./focus-manager.02955f48.js";import"./use-form.63261807.js";import"./axios.4c6579cc.js";var de=Object.defineProperty,me=Object.getOwnPropertyDescriptor,M=(l,s,i,a)=>{for(var e=a>1?void 0:a?me(s,i):s,d=l.length-1,c;d>=0;d--)(c=l[d])&&(e=(a?c(s,i,e):c(e))||e);return a&&e&&de(s,i,e),e};class w extends ie{email;password}M([B({message:"Email is required."}),ae({},{message:"Please, enter a valid email."})],w.prototype,"email",2);M([B({message:"Please, enter your password."})],w.prototype,"password",2);class ce extends ne{authStore=z();async signin({onSuccess:s,onError:i}){var a;try{await this.invokevalidation(i),delete this.model.errors;const e=await this.requestApi(Q.SIGNIN,"post",{body:this.model}),d=await this.requestApi(Q.USER,"get",{headers:{Authorization:`Bearer ${e.token}`}});await this.authStore.handleAuthToken({...d,token:e.token}),s==null||s()}catch(e){i==null||i(((a=e.response)==null?void 0:a.data).message)}}}const h=l=>(K("data-v-256b4338"),l=l(),L(),l),ue=h(()=>o("div",{class:"text-h2 text-bolder q-mb-sm",style:{"font-size":"calc(2.4vh + 0.6vw)","letter-spacing":"1px","font-weight":"900"}}," Sign in ",-1)),pe={class:"flex column field q-mb-md"},fe=h(()=>o("span",{class:"q-ml-lg"},"Email",-1)),ge={class:"flex column field q-mb-md"},ve=h(()=>o("span",{class:"q-ml-lg"},"Password",-1)),we={class:"flex column items-center",style:{width:"100%",color:"#fff","margin-top":"2rem"}},he={class:"flex column items-center",style:{width:"100%"}},_e={class:"text-secondary"},ye={key:0,class:"signin-right-side flex row justify-end",style:{height:"100vh",width:"45vw",overflow:"hidden"}},xe=D({__name:"SigninPage",setup(l){const s=E(),i=F();let a;const e=s.screen;function d(){return{height:"fit-content",width:"100vw"}}const c=v("signup-form"),u=v(!1),_=v(),y=new ce(new w),N=new X(new Y),n=b(y.model),g=b(N.model),R=q(()=>e.gt.sm),p=q(()=>e.gt.md);C(async()=>{var t;await((t=n.validate)==null?void 0:t.call(n))}),C(async()=>{var t;await((t=g.validate)==null?void 0:t.call(g))});async function T(){var t;if(Z(u),!$()){await((t=_.value)==null?void 0:t.validate(!0));return}ee(u,s.loading,"Please, wait."),await y.signin({async onSuccess(){c.value="confirmation",A({loader:s.loading,timer:a,requestProcessingRef:u}),await i.replace("/services")},async onError(r){se({type:"negative",...r?{message:r}:{}}),A({loader:s.loading,timer:a,requestProcessingRef:u})}}),a=setTimeout(()=>{s.loading.hide()},te)}function $(){return le(n)}return(t,r)=>(S(),U(W,{class:P([`${p.value?"flex row justify-end":""}`,"signin-page-font-size"]),"style-fn":d},{default:V(()=>[o("div",{style:O({width:p.value?"calc(0.8rem + 52vw)":"100vw",overflow:"hidden",backgroundImage:p.value?"":"url(/assets/hotel_reception.png)"})},[ue,m(G(oe),{ref_key:"signinFormRef",ref:_},{default:V(()=>[o("div",{class:P(["flex column q-pa-md",p.value?"":R.value?"grt-sm":"lst-sm"]),style:{"background-color":"rgba(255, 255, 255, 0.7)","font-weight":"600"}},[o("div",pe,[fe,m(x,{color:"black",outlined:"",rounded:"",modelValue:n.email,"onUpdate:modelValue":r[0]||(r[0]=f=>n.email=f),rules:[()=>t.$validateField(n,"email")]},null,8,["modelValue","rules"])]),o("div",ge,[ve,m(x,{outlined:"",rounded:"",type:"password",modelValue:n.password,"onUpdate:modelValue":r[1]||(r[1]=f=>n.password=f),rules:[()=>t.$validateField(n,"password")]},null,8,["modelValue","rules"])]),o("div",we,[o("div",he,[m(j,{class:"bg-primary q-py-sm q-px-md q-mb-sm",label:"Sign In",style:{"font-size":"1rem",width:"80%"},rounded:"","no-caps":"",onClick:T,disable:u.value},null,8,["disable"])]),o("p",_e,[I(" Dont have account? "),o("span",{class:"text-primary text-bolder cursor-pointer",onClick:r[2]||(r[2]=f=>t.$router.push("/signup"))},"Signup"),I(". ")])])],2)]),_:1},512)],4),p.value?(S(),H("div",ye,[m(k,{src:"/assets/hotel_reception.png",fit:"fill"}),m(k,{class:"logo-img",src:"/assets/starlings_logo.png"})])):J("",!0)]),_:1},8,["class"]))}});var Te=re(xe,[["__scopeId","data-v-256b4338"]]);export{Te as default};
