import{Q as g}from"./QInput.04198cfd.js";import{Q as X}from"./QSelect.7c826cfb.js";import{l as z,h as Y,K as Z,c as N,ar as ee,g as se,ax as ae,d as te,am as le,q as oe,r as y,ai as j,n as R,v as ne,x as f,ao as w,A as e,f as n,ay as U,C,Q as F,D as Q,p as ie,E as de,G as re,H as ue}from"./index.3c48b6f7.js";import{u as me,a as ce,b as pe,c as fe}from"./use-panel.2625a8f5.js";import{Q as ve}from"./QTooltip.9c7d8d44.js";import{u as ge,a as ye,Q as $}from"./use-dark.f400b985.js";import{Q as he}from"./QPage.2dc96178.js";import{r as we,T as _e,S as xe,u as D,a as Ve,b as qe,l as Pe,c as be}from"./projectConstants.d6c4b657.js";import{I as _,a as Ce,c as M,Q as B}from"./QForm.e33f984a.js";import{B as Ne,V as ke}from"./base.view-model.5e1efaea.js";import{A as Ie}from"./urlPaths.enum.82ba9a55.js";import{c as A,i as Qe}from"./utils.6837a8f1.js";import{_ as Te}from"./plugin-vue_export-helper.21dcd24c.js";import"./use-key-composition.d4c28df8.js";import"./focus-manager.02955f48.js";import"./use-form.63261807.js";import"./QItemLabel.9ddb68b1.js";import"./use-model-toggle.e512d394.js";import"./QMenu.f664353c.js";import"./selection.87736456.js";import"./use-cache.b0833c75.js";import"./axios.4c6579cc.js";var O=z({name:"QTabPanel",props:me,setup(u,{slots:t}){return()=>Y("div",{class:"q-tab-panel",role:"tabpanel"},Z(t.default))}}),Se=z({name:"QTabPanels",props:{...ce,...ge},emits:pe,setup(u,{slots:t}){const i=se(),d=ye(u,i.proxy.$q),{updatePanelsList:r,getPanelContent:v,panelDirectives:p}=fe(),V=N(()=>"q-tab-panels q-panel-parent"+(d.value===!0?" q-tab-panels--dark q-dark":""));return()=>(r(t),ee("div",{class:V.value},v(),"pan",u.swipeable,()=>p.value))}}),je=Object.defineProperty,Re=Object.getOwnPropertyDescriptor,x=(u,t,i,d)=>{for(var r=d>1?void 0:d?Re(t,i):t,v=u.length-1,p;v>=0;v--)(p=u[v])&&(r=(d?p(t,i,r):p(r))||r);return d&&r&&je(t,i,r),r};class h extends Ne{id;firstName;lastName;email;phone;phoneCodeId;password}x([_({message:"First Name is required."})],h.prototype,"firstName",2);x([_({message:"Last Name is required."})],h.prototype,"lastName",2);x([_({message:"Email is required."}),Ce({},{message:"Please, enter a valid email."})],h.prototype,"email",2);x([_({message:"Phone is required."})],h.prototype,"phone",2);x([_({message:"Please, select a country phone code id."})],h.prototype,"phoneCodeId",2);x([_({message:"Please, enter your password."})],h.prototype,"password",2);class Ue extends ke{authStore=ae();async signup({onSuccess:t,onError:i}){var d;try{await this.invokevalidation(i),delete this.model.errors,await we(this.model),t==null||t()}catch(r){i==null||i(((d=r.response)==null?void 0:d.data).message)}}async resendToken({onError:t,onSuccess:i}={}){try{await this.requestApi(Ie.RESEND_TOKEN,"post",{body:{email:this.model.email}}),i==null||i()}catch(d){t==null||t(d.message)}}}const c=u=>(re("data-v-79a3f56e"),u=u(),ue(),u),Fe=c(()=>e("div",{class:"text-h2 text-bolder q-mb-sm",style:{"font-size":"calc(2.4vh + 0.6vw)","letter-spacing":"1px","font-weight":"900"}}," Sign up ",-1)),$e={style:{width:"100%",height:"60vh"}},De={class:"flex column field"},Me=c(()=>e("span",{class:"q-ml-lg"},"First Name",-1)),Be={class:"flex column field"},Ae=c(()=>e("span",{class:"q-ml-lg"},"Last Name",-1)),Oe={class:"flex column field"},ze=c(()=>e("span",{class:"q-ml-lg"},"Email",-1)),Ee={class:"flex column field"},Ge=c(()=>e("span",{class:"q-ml-lg"},"Phone Number",-1)),He={class:"flex row q-mr-sm"},Le={class:"flex column field"},Ke=c(()=>e("span",{class:"q-ml-lg"},"Password",-1)),Je={class:"flex column field"},We=c(()=>e("span",{class:"q-ml-lg"},"Confirm Password",-1)),Xe={style:{width:"100%"},class:"flex column items-center"},Ye={class:"text-secondary"},Ze={class:"flex column justify-end"},es={class:"q-pa-xl q-mt-xl q-mx-*",style:{"margin-top":"20vh"}},ss=c(()=>e("p",{class:"text-h5"},"Complete your verification:",-1)),as={class:"flex column",style:{"margin-left":"5vw"}},ts=c(()=>e("span",{class:"q-ml-lg q-mt-xl"},"Type the code sent to your email in here",-1)),ls={class:"q-mt-sm"},os={class:"flex row"},ns=c(()=>e("span",null,"Didn't Receive code? ",-1)),is=c(()=>e("div",null,null,-1)),ds={key:0,class:"signup-right-side flex row justify-end",style:{height:"100vh",width:"45vw",overflow:"hidden"}},rs=te({__name:"SignupPage",setup(u){const t=le(),i=oe();let d;const r=t.screen;function v(){return{height:"fit-content",width:"100vw"}}const p=y(""),V=y(!1),k=y("signup-form"),q=y(!1),T=y(),E=y([{name:"234",id:"151"}]);y();const I=new Ue(new h),S=new _e(new xe),a=j(I.model),P=j(S.model),b=N(()=>r.gt.sm),m=N(()=>r.gt.md);M(async()=>{var s;await((s=a.validate)==null?void 0:s.call(a))}),M(async()=>{var s;await((s=P.validate)==null?void 0:s.call(P))});const G=N(()=>E.value.map(s=>({label:s.name,value:s.id})));async function H(){S.submitToken(a.email,{async onSuccess(){await i.replace("/services")},async onError(s){D({type:"negative",...s?{message:s}:{}})}})}async function L(){var s;if(Ve(q),!W()){await((s=T.value)==null?void 0:s.validate(!0));return}qe(q,t.loading,"Please, wait."),await I.signup({async onSuccess(){k.value="confirmation",A({loader:t.loading,timer:d,requestProcessingRef:q})},async onError(l){D({type:"negative",...l?{message:l}:{}}),A({loader:t.loading,timer:d,requestProcessingRef:q})}}),d=setTimeout(()=>{t.loading.hide()},Pe)}async function K(){await be({async process(){I.resendToken({async onSuccess(){}})},loader:t.loading,loaderMessage:"Requesting",useNotifer:!0})}function J(s){return V.value=!!s&&s===a.password,V.value||"Value must match Password value."}function W(){return Qe(a)&&V.value}return(s,l)=>(R(),ne(he,{class:w([`${m.value?"flex row justify-end":""}`,"signup-page-font-size"]),"style-fn":v},{default:f(()=>[e("div",{style:C({width:m.value?"calc(0.8rem + 52vw)":"100vw",overflow:"hidden",backgroundImage:m.value?"":"url(/assets/hotel_reception.png)"})},[Fe,n(Se,{modelValue:k.value,"onUpdate:modelValue":l[9]||(l[9]=o=>k.value=o),style:C({width:m.value?"100%":"100vw",height:m.value?"100%":"100vh",backgroundColor:"transparent"}),animated:""},{default:f(()=>[n(O,{name:"signup-form",style:{width:"100%"},class:"form-panel"},{default:f(()=>[e("div",$e,[n(U(B),{ref_key:"signupFormRef",ref:T},{default:f(()=>[e("div",{class:w(["flex column q-pa-md",m.value?"":b.value?"grt-sm":"lst-sm"]),style:{"background-color":"rgba(255, 255, 255, 0.7)","font-weight":"600"}},[e("div",{class:w(["flex",m.value||b.value?"row items-end justify-around":"column flex-center"])},[e("div",De,[Me,n(g,{color:"secondary",outlined:"",rounded:"",modelValue:a.firstName,"onUpdate:modelValue":l[0]||(l[0]=o=>a.firstName=o),rules:[()=>s.$validateField(a,"firstName")]},null,8,["modelValue","rules"])]),e("div",Be,[Ae,n(g,{color:"secondary",outlined:"",rounded:"",modelValue:a.lastName,"onUpdate:modelValue":l[1]||(l[1]=o=>a.lastName=o),rules:[()=>s.$validateField(a,"lastName")]},null,8,["modelValue","rules"])])],2),e("div",{class:w(["flex",m.value||b.value?"row items-end justify-around":"column flex-center"])},[e("div",Oe,[ze,n(g,{color:"black",outlined:"",rounded:"",modelValue:a.email,"onUpdate:modelValue":l[2]||(l[2]=o=>a.email=o),rules:[()=>s.$validateField(a,"email")]},null,8,["modelValue","rules"])]),e("div",Ee,[Ge,e("div",He,[n(X,{outlined:"",rounded:"",style:C({width:m.value?"20%":"40%"}),modelValue:a.phoneCodeId,"onUpdate:modelValue":l[3]||(l[3]=o=>a.phoneCodeId=o),options:G.value,class:"text-bolder","bg-color":"secondary",rules:[()=>s.$validateField(a,"phoneCodeId")],"emit-value":"","map-options":""},null,8,["style","modelValue","options","rules"]),n(g,{style:C({width:m.value?"80%":"60%"}),color:"secondary",modelValue:a.phone,"onUpdate:modelValue":l[4]||(l[4]=o=>a.phone=o),outlined:"",rounded:"",rules:[()=>s.$validateField(a,"phone")]},null,8,["style","modelValue","rules"])])])],2),e("div",{class:w(["flex",m.value||b.value?"row items-end justify-around":"column flex-center"])},[e("div",Le,[Ke,n(g,{outlined:"",rounded:"",type:"password",modelValue:a.password,"onUpdate:modelValue":l[5]||(l[5]=o=>a.password=o),rules:[()=>s.$validateField(a,"password")]},null,8,["modelValue","rules"])]),e("div",Je,[We,n(g,{type:"password",outlined:"",rounded:"",modelValue:p.value,"onUpdate:modelValue":l[6]||(l[6]=o=>p.value=o),color:"secondary",rules:[J]},null,8,["modelValue","rules"])])],2),e("div",{class:w(["flex",m.value||b.value?"row items-end justify-around":"column flex-center"]),style:{width:"100%",color:"#fff","margin-top":"2rem"}},[e("div",Xe,[n(F,{class:"bg-primary q-py-sm q-px-sm q-mx-auto q-mb-sm",label:"Register",style:{"font-size":"1rem"},rounded:"","no-caps":"",onClick:L,disable:q.value},null,8,["disable"]),e("p",Ye,[Q(" Have existing account? "),e("span",{class:"text-primary text-bolder cursor-pointer",onClick:l[7]||(l[7]=o=>s.$router.push("/signin"))},"Signin"),Q(". ")])])],2)],2)]),_:1},512)])]),_:1},8,["name"]),n(O,{name:"confirmation"},{default:f(()=>[e("div",null,[n(U(B),null,{default:f(()=>[e("div",Ze,[e("div",es,[ss,e("div",as,[ts,e("div",ls,[e("div",os,[n(g,{style:{width:"58%"},"input-style":"letter-spacing: 2vw; text-align: center",rounded:"",outlined:"",modelValue:P.code,"onUpdate:modelValue":l[8]||(l[8]=o=>P.code=o),color:"secondary",maxlength:"6"},null,8,["modelValue"]),n(F,{class:"q-px-md q-ml-md bg-secondary text-white",icon:"trending_flat",rounded:"",onClick:H},{default:f(()=>[n(ve,{class:"bg-accent text-bold shadow-4",title:"Verify"},{default:f(()=>[Q("Verify ")]),_:1})]),_:1})]),e("div",{class:"text-center q-mt-sm",style:{width:"80%"}},[ns,e("span",{class:"text-secondary q-ml-md",style:{cursor:"pointer"},onClick:K},"Resend Verification Code")])])])]),is])]),_:1})])]),_:1},8,["name"])]),_:1},8,["modelValue","style"])],4),m.value?(R(),ie("div",ds,[n($,{src:"/assets/hotel_reception.png",fit:"fill"}),n($,{class:"logo-img",src:"/assets/starlings_logo.png"})])):de("",!0)]),_:1},8,["class"]))}});var Ss=Te(rs,[["__scopeId","data-v-79a3f56e"]]);export{Ss as default};
